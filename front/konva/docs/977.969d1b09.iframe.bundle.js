"use strict";(self.webpackChunk_melfore_konva_timeline=self.webpackChunk_melfore_konva_timeline||[]).push([[977],{"./src/utils/stories/decorators/Tasks.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Jy:function(){return TaskDecorator},P0:function(){return LayerDecorator},cL:function(){return COLOR_ARG_TYPE},xJ:function(){return TasksLayerDecorator},zM:function(){return STORY_DATA}});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),react_konva__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-konva/es/ReactKonva.js"),_timeline_TimelineContext__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/timeline/TimelineContext.tsx"),_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/utils/stories/utils.ts");function cov_1gfunrsnml(){var path="/home/runner/work/konva-timeline/konva-timeline/src/utils/stories/decorators/Tasks.tsx",global=new Function("return this")(),gcv="__coverage__",coverageData={path:"/home/runner/work/konva-timeline/konva-timeline/src/utils/stories/decorators/Tasks.tsx",statementMap:{0:{start:{line:1,column:22},end:{line:1,column:274}},1:{start:{line:1,column:94},end:{line:1,column:228}},2:{start:{line:1,column:107},end:{line:1,column:108}},3:{start:{line:1,column:147},end:{line:1,column:159}},4:{start:{line:1,column:161},end:{line:1,column:226}},5:{start:{line:1,column:178},end:{line:1,column:226}},6:{start:{line:1,column:229},end:{line:1,column:238}},7:{start:{line:8,column:30},end:{line:12,column:1}},8:{start:{line:13,column:26},end:{line:18,column:2}},9:{start:{line:19,column:30},end:{line:21,column:1}},10:{start:{line:20,column:2},end:{line:20,column:64}},11:{start:{line:22,column:29},end:{line:44,column:1}},12:{start:{line:23,column:21},end:{line:23,column:33}},13:{start:{line:24,column:28},end:{line:24,column:45}},14:{start:{line:25,column:2},end:{line:33,column:9}},15:{start:{line:26,column:4},end:{line:28,column:5}},16:{start:{line:27,column:6},end:{line:27,column:13}},17:{start:{line:31,column:8},end:{line:31,column:50}},18:{start:{line:32,column:4},end:{line:32,column:20}},19:{start:{line:34,column:2},end:{line:43,column:63}},20:{start:{line:35,column:25},end:{line:35,column:80}},21:{start:{line:36,column:26},end:{line:36,column:82}},22:{start:{line:47,column:36},end:{line:64,column:1}},23:{start:{line:52,column:6},end:{line:52,column:26}},24:{start:{line:53,column:21},end:{line:53,column:47}},25:{start:{line:53,column:35},end:{line:53,column:42}},26:{start:{line:54,column:2},end:{line:59,column:33}},27:{start:{line:55,column:4},end:{line:58,column:7}},28:{start:{line:60,column:2},end:{line:63,column:17}},29:{start:{line:65,column:35},end:{line:73,column:1}},30:{start:{line:66,column:2},end:{line:72,column:6}},31:{start:{line:67,column:25},end:{line:67,column:80}},32:{start:{line:68,column:26},end:{line:68,column:82}}},fnMap:{0:{name:"_extends",decl:{start:{line:1,column:9},end:{line:1,column:17}},loc:{start:{line:1,column:20},end:{line:1,column:276}},line:1},1:{name:"(anonymous_1)",decl:{start:{line:1,column:79},end:{line:1,column:80}},loc:{start:{line:1,column:92},end:{line:1,column:240}},line:1},2:{name:"(anonymous_2)",decl:{start:{line:19,column:30},end:{line:19,column:31}},loc:{start:{line:19,column:39},end:{line:21,column:1}},line:19},3:{name:"(anonymous_3)",decl:{start:{line:22,column:29},end:{line:22,column:30}},loc:{start:{line:22,column:38},end:{line:44,column:1}},line:22},4:{name:"(anonymous_4)",decl:{start:{line:25,column:12},end:{line:25,column:13}},loc:{start:{line:25,column:18},end:{line:33,column:3}},line:25},5:{name:"(anonymous_5)",decl:{start:{line:35,column:17},end:{line:35,column:18}},loc:{start:{line:35,column:25},end:{line:35,column:80}},line:35},6:{name:"(anonymous_6)",decl:{start:{line:36,column:18},end:{line:36,column:19}},loc:{start:{line:36,column:26},end:{line:36,column:82}},line:36},7:{name:"(anonymous_7)",decl:{start:{line:47,column:36},end:{line:47,column:37}},loc:{start:{line:49,column:6},end:{line:64,column:1}},line:49},8:{name:"(anonymous_8)",decl:{start:{line:53,column:29},end:{line:53,column:30}},loc:{start:{line:53,column:35},end:{line:53,column:42}},line:53},9:{name:"(anonymous_9)",decl:{start:{line:54,column:12},end:{line:54,column:13}},loc:{start:{line:54,column:18},end:{line:59,column:3}},line:54},10:{name:"(anonymous_10)",decl:{start:{line:65,column:35},end:{line:65,column:36}},loc:{start:{line:65,column:44},end:{line:73,column:1}},line:65},11:{name:"(anonymous_11)",decl:{start:{line:67,column:17},end:{line:67,column:18}},loc:{start:{line:67,column:25},end:{line:67,column:80}},line:67},12:{name:"(anonymous_12)",decl:{start:{line:68,column:18},end:{line:68,column:19}},loc:{start:{line:68,column:26},end:{line:68,column:82}},line:68}},branchMap:{0:{loc:{start:{line:1,column:40},end:{line:1,column:240}},type:"cond-expr",locations:[{start:{line:1,column:56},end:{line:1,column:76}},{start:{line:1,column:79},end:{line:1,column:240}}],line:1},1:{loc:{start:{line:1,column:178},end:{line:1,column:225}},type:"binary-expr",locations:[{start:{line:1,column:178},end:{line:1,column:208}},{start:{line:1,column:213},end:{line:1,column:224}}],line:1},2:{loc:{start:{line:26,column:4},end:{line:28,column:5}},type:"if",locations:[{start:{line:26,column:4},end:{line:28,column:5}},{start:{line:void 0,column:void 0},end:{line:void 0,column:void 0}}],line:26}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},b:{0:[0,0],1:[0,0],2:[0,0]},inputSourceMap:{version:3,names:["React","useEffect","useMemo","useRef","Layer","Stage","TimelineProvider","useTimelineContext","generateStoryData","COLOR_ARG_TYPE","control","type","STORY_DATA","averageTaskDurationInMinutes","resourcesCount","tasksCount","timeRangeInDays","LayerDecorator","Story","createElement","TaskDecorator","wrapperRef","width","setWidth","useState","current","getBoundingClientRect","_extends","onTaskClick","task","alert","id","onTaskChange","resolution","ref","height","TasksLayerInternalDecorator","storyFn","setDrawRange","stageWidth","start","end","TasksLayerDecorator"],sources:["/home/runner/work/konva-timeline/konva-timeline/src/utils/stories/decorators/Tasks.tsx"],sourcesContent:['import React, { useEffect, useMemo, useRef } from "react";\nimport { Layer, Stage } from "react-konva";\nimport { Decorator } from "@storybook/react";\n\nimport { TimelineProvider, useTimelineContext } from "../../../timeline/TimelineContext";\nimport { generateStoryData } from "../utils";\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport const COLOR_ARG_TYPE: any = {\n  control: {\n    type: "color",\n  },\n};\n\nexport const STORY_DATA = generateStoryData({\n  averageTaskDurationInMinutes: 180,\n  resourcesCount: 3,\n  tasksCount: 10,\n  timeRangeInDays: 1,\n});\n\nexport const LayerDecorator: Decorator = (Story) => {\n  return <Layer>{Story()}</Layer>;\n};\n\nexport const TaskDecorator: Decorator = (Story) => {\n  const wrapperRef = useRef<HTMLDivElement>(null);\n\n  const [width, setWidth] = React.useState(0);\n\n  useEffect(() => {\n    if (!wrapperRef.current) {\n      return;\n    }\n\n    const { width } = wrapperRef.current.getBoundingClientRect();\n    setWidth(width);\n  }, []);\n\n  return (\n    <TimelineProvider\n      {...STORY_DATA}\n      onTaskClick={(task) => alert(`OnTaskClick event handler - TaskId: ${task.id}`)}\n      onTaskChange={(task) => alert(`OnTaskChange event handler - TaskId: ${task.id}`)}\n      resolution="1hrs"\n    >\n      <div ref={wrapperRef}>\n        <Stage height={200} width={width}>\n          <Layer>{Story()}</Layer>\n        </Stage>\n      </div>\n    </TimelineProvider>\n  );\n};\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst TasksLayerInternalDecorator = ({ storyFn }: any) => {\n  const { setDrawRange } = useTimelineContext();\n\n  const stageWidth = useMemo(() => 60 * 24, []);\n\n  useEffect(() => {\n    setDrawRange({ start: 0, end: stageWidth + 200 });\n  }, [setDrawRange, stageWidth]);\n\n  return (\n    <div>\n      <Stage height={200} width={60 * 24}>\n        {storyFn()}\n      </Stage>\n    </div>\n  );\n};\n\nexport const TasksLayerDecorator: Decorator = (Story) => {\n  return (\n    <TimelineProvider\n      {...STORY_DATA}\n      onTaskClick={(task) => alert(`OnTaskClick event handler - TaskId: ${task.id}`)}\n      onTaskChange={(task) => alert(`OnTaskChange event handler - TaskId: ${task.id}`)}\n      resolution="1hrs"\n    >\n      <TasksLayerInternalDecorator storyFn={Story} />\n    </TimelineProvider>\n  );\n};\n'],mappings:"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",ignoreList:[]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b66ea3e2aadadfa3c08541e0a27b0397edbc1591"},coverage=global[gcv]||(global[gcv]={});coverage[path]&&"b66ea3e2aadadfa3c08541e0a27b0397edbc1591"===coverage[path].hash||(coverage[path]=coverageData);var actualCoverage=coverage[path];return cov_1gfunrsnml=function(){return actualCoverage},actualCoverage}function _extends(){return cov_1gfunrsnml().f[0]++,cov_1gfunrsnml().s[0]++,_extends=Object.assign?(cov_1gfunrsnml().b[0][0]++,Object.assign.bind()):(cov_1gfunrsnml().b[0][1]++,function(n){cov_1gfunrsnml().f[1]++,cov_1gfunrsnml().s[1]++;for(var e=(cov_1gfunrsnml().s[2]++,1);e<arguments.length;e++){var t=(cov_1gfunrsnml().s[3]++,arguments[e]);for(var r in cov_1gfunrsnml().s[4]++,t)cov_1gfunrsnml().s[5]++,cov_1gfunrsnml().b[1][0]++,{}.hasOwnProperty.call(t,r)&&(cov_1gfunrsnml().b[1][1]++,n[r]=t[r])}return cov_1gfunrsnml().s[6]++,n}),_extends.apply(null,arguments)}cov_1gfunrsnml();const COLOR_ARG_TYPE=(cov_1gfunrsnml().s[7]++,{control:{type:"color"}}),STORY_DATA=(cov_1gfunrsnml().s[8]++,(0,_utils__WEBPACK_IMPORTED_MODULE_3__.Xk)({averageTaskDurationInMinutes:180,resourcesCount:3,tasksCount:10,timeRangeInDays:1}));cov_1gfunrsnml().s[9]++;const LayerDecorator=Story=>(cov_1gfunrsnml().f[2]++,cov_1gfunrsnml().s[10]++,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_konva__WEBPACK_IMPORTED_MODULE_1__.Wd,null,Story()));cov_1gfunrsnml().s[11]++;const TaskDecorator=Story=>{cov_1gfunrsnml().f[3]++;const wrapperRef=(cov_1gfunrsnml().s[12]++,(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null)),[width,setWidth]=(cov_1gfunrsnml().s[13]++,react__WEBPACK_IMPORTED_MODULE_0__.useState(0));return cov_1gfunrsnml().s[14]++,(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{if(cov_1gfunrsnml().f[4]++,cov_1gfunrsnml().s[15]++,!wrapperRef.current)return cov_1gfunrsnml().b[2][0]++,void cov_1gfunrsnml().s[16]++;cov_1gfunrsnml().b[2][1]++;const{width:width}=(cov_1gfunrsnml().s[17]++,wrapperRef.current.getBoundingClientRect());cov_1gfunrsnml().s[18]++,setWidth(width)}),[]),cov_1gfunrsnml().s[19]++,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_timeline_TimelineContext__WEBPACK_IMPORTED_MODULE_2__.V,_extends({},STORY_DATA,{onTaskClick:task=>(cov_1gfunrsnml().f[5]++,cov_1gfunrsnml().s[20]++,alert(`OnTaskClick event handler - TaskId: ${task.id}`)),onTaskChange:task=>(cov_1gfunrsnml().f[6]++,cov_1gfunrsnml().s[21]++,alert(`OnTaskChange event handler - TaskId: ${task.id}`)),resolution:"1hrs"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{ref:wrapperRef},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_konva__WEBPACK_IMPORTED_MODULE_1__.BI,{height:200,width:width},react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_konva__WEBPACK_IMPORTED_MODULE_1__.Wd,null,Story()))))};cov_1gfunrsnml().s[22]++;const TasksLayerInternalDecorator=({storyFn:storyFn})=>{cov_1gfunrsnml().f[7]++;const{setDrawRange:setDrawRange}=(cov_1gfunrsnml().s[23]++,(0,_timeline_TimelineContext__WEBPACK_IMPORTED_MODULE_2__._)()),stageWidth=(cov_1gfunrsnml().s[24]++,(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((()=>(cov_1gfunrsnml().f[8]++,cov_1gfunrsnml().s[25]++,1440)),[]));return cov_1gfunrsnml().s[26]++,(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{cov_1gfunrsnml().f[9]++,cov_1gfunrsnml().s[27]++,setDrawRange({start:0,end:stageWidth+200})}),[setDrawRange,stageWidth]),cov_1gfunrsnml().s[28]++,react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_konva__WEBPACK_IMPORTED_MODULE_1__.BI,{height:200,width:1440},storyFn()))};cov_1gfunrsnml().s[29]++;const TasksLayerDecorator=Story=>(cov_1gfunrsnml().f[10]++,cov_1gfunrsnml().s[30]++,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_timeline_TimelineContext__WEBPACK_IMPORTED_MODULE_2__.V,_extends({},STORY_DATA,{onTaskClick:task=>(cov_1gfunrsnml().f[11]++,cov_1gfunrsnml().s[31]++,alert(`OnTaskClick event handler - TaskId: ${task.id}`)),onTaskChange:task=>(cov_1gfunrsnml().f[12]++,cov_1gfunrsnml().s[32]++,alert(`OnTaskChange event handler - TaskId: ${task.id}`)),resolution:"1hrs"}),react__WEBPACK_IMPORTED_MODULE_0__.createElement(TasksLayerInternalDecorator,{storyFn:Story})))}}]);